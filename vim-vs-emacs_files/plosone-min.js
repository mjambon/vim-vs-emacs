$(function(){$(".filter-bar.subject ul li.first").hoverIntent({over:function(){$(this).addClass("over")},timeout:500,out:function(){$(this).removeClass("over")}})});$(function(){var a=$(".article-block");if(a.length<1){return}$(".article-block > a > img").filterize();$(".articles-list").each(function(){var c=$(this).children(".article-block");c.eq(2).addClass("clear");c.eq(4).addClass("clear");for(var b=6;b<c.size();b=b+3){c.eq(b).addClass("article-block-last")}})});$(function(){function c(f){var d=$(this);var e=$(f);e.filter(".article-block:nth-child(3n)").addClass("article-block-last");$(".articles-list .loader").remove();d.closest(".articles-list").append(e);d.closest(".articles-list").find("a.abstract").on("click",function(g){doi=$(this).data("doi");FigViewerInit(doi,null,"abst",true);g.preventDefault();return false});d.closest(".articles-list").find("a.figures").on("click",function(g){doi=$(this).data("doi");FigViewerInit(doi,null,"figs",true);g.preventDefault();return false});$(".article-block > a > img").filterize();d.closest(".pagination").remove()}function a(e){var f=e.attr("href");e.hide();e.attr("disabled",true);var d=$("<div/>").attr("class","loader").append($("<img/>").attr("src","../images/loading-spinner.gif")).insertBefore(e.closest(".pagination"));$.ajax({url:f,type:"GET",dataType:"text",success:function(g,i,h){$.proxy(c,e)(g)},error:function(h,i,g){e.attr("disabled",false);$(".articles-list .loader").remove()}})}function b(e){e.preventDefault();var d=$(e.target);if(d.attr("disabled")){return}a(d)}$(".articles-list").on("click",".more",b)});$(function(){var b=$("#sticky-footer");function a(){var c=100;if(($(window).scrollTop()>c)&&(b.data("positioned")=="false")){b.fadeIn().data("positioned","true")}else{if(($(window).scrollTop()<=c)&&(b.data("positioned")=="true")){b.fadeOut().data("positioned","false")}}}$(window).scroll(a);b.data("positioned","false");$("a.close").click(function(c){c.preventDefault();b.fadeOut(function(){b.css("visibility","hidden")})})});$(function(){if($(".articles-list").length<=1){return}function b(g){$(".articles-list").addClass("offscreen");$(".articles-list."+g).removeClass("offscreen");$(".filter-bar .active").removeClass("active");$(this).addClass("active")}function d(){var g=window.location.hash.replace("#","");if(g==""){g="news"}$.proxy(b,$(".filter-bar ."+g))(g)}function f(h){var g=h.attr("class").split(" ").pop();if(!h.hasClass("active")){if(window.history&&history.pushState){history.pushState(null,null,"#"+g)}$.proxy(b,h)(g)}}function c(){e=true;d()}function a(g){g.preventDefault();f($(g.target))}$(".articles-list.popular, .articles-list.recent").addClass("offscreen");$(".filter-bar .recent, .filter-bar .popular, .filter-bar .news").on("click",a);var e=false;if(window.history&&history.pushState){$(window).on("popstate",c);$(window).on("load",function(){if(!e){c()}else{}})}else{d()}});$(function(){if($("#footer-slides").length<1){return}var f=$("#footer-slides .slide");var j=1;h(j);$("#footer-slides").on("click",".slide-nav a",i);$("#footer-slides").on("click",".control-nav a",i);$(".slide-nav").hover(function(){$(this).children("a").addClass("over")},function(){$(this).children("a").removeClass("over")});var b=f.height();$(".slides").css({height:(b+"px")});$("#footer-slides .slide-nav").show();$("#footer-slides .control-nav").show();function i(k){k.preventDefault();var l=$(k.currentTarget).data("dest");a(l)}function a(k){var l=f.width();$(".slides-scroller").animate({left:((k-1)*-l)});d(k);j=k}function g(l){var m,k;if(l>=f.length){m=1;prev_slide_num=l-1}else{if(l<=1){m=l+1;prev_slide_num=f.length}else{m=l+1;prev_slide_num=l-1}}return{next:m,prev:prev_slide_num}}function d(n){$(".control-nav a.active").removeClass("active");$(".control-nav li:nth-child("+(n)+") a").addClass("active");var m=g(n);var k=f.eq(m.next-1);var l=f.eq(m.prev-1);$(".next-slide").html(e(k,m.next));$(".prev-slide").html(e(l,m.prev))}function h(p){var o=g(p);var k=f.eq(o.next-1);var m=f.eq(o.prev-1);var n=$('<div class="next-slide slide-nav"></div>').append(e(k,o.next));var q=$('<div class="prev-slide slide-nav"></div>').append(e(m,o.prev));var l=$('<ol class="control-nav"></ol>').append(c(f.length,1));$("#footer-slides").append(n).append(q).append(l)}function e(m,l){var k=['<a href="#" data-dest="'+l+'">','<span class="row">','<span class="cell image"><img src="'+m.data("small-img")+'" alt="" /></span>','<span class="cell">'+m.data("short-title")+"</span>","</span>","</a>"];return $(k.join("\n"))}function c(k,n){var l=[];n=n||0;for(var m=1;m<=k;m++){l.push('<li><a href="#" data-dest="'+m+'" class="'+((n==m)?"active":"")+'">'+m+"</a></li>")}return $(l.join("\n"))}});