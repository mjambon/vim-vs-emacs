/*!
 * jQuery.filterize v1.0.0
 * https://github.com/digitalpulp/jquery-filterize
 *
 * Copyright 2013 Justin Blecher / Digital Pulp, Inc.
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: 2013-07-25
 */
(function(g){var d=0;function h(i){return i+"-"+(d++)}var f={svg:"http://www.w3.org/2000/svg"};function c(){return !!document.createElementNS&&!!document.createElementNS(f.svg,"svg").createSVGRect}function b(){var i=document.createElement("div");i.innerHTML="<svg/>";return(i.firstChild&&i.firstChild.namespaceURI)==f.svg}function a(){var i=false;try{i=typeof SVGFEColorMatrixElement!==undefined&&SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE==2}catch(j){}return i}function e(){var i=document.createElement("canvas");return !!(i.getContext&&i.getContext("2d"))}g.fn.extend({filterize:function(q){var j=c()&&b()&&a();var l=e();var i="none";if(!(j||l)){return}var k={replacement_class_base:"filterize-replacement",svg_filter:"<feColorMatrix type='saturate' values='0' />",canvas_function:function(v,u,s){for(var z=0;z<s;z++){for(var r=0;r<u;r++){var t=(z*4)*u+(r*4);var w=(v[t]+v[t+1]+v[t+2])/3;v[t]=v[t+1]=v[t+2]=w}}},wrapping_tag:"div",wrap_class:"filterize-wrapper",wrapping_style:"position: relative; display: inline-block; overflow: hidden; ",callback:null};k.replacement_class=h(k.replacement_class_base);q=g.extend(k,q);function n(v){var t=v.width();var r=v.height();var u=v[0].src;var s;if(j){s=p(u,t,r);i="SVG"}else{if(q.canvas_function!==false){s=m(u,t,r);i="Canvas"}}v.wrap("<"+q.wrapping_tag+'           style="'+q.wrapping_style+"width: "+t+"px; height: "+r+'px"           class="'+q.wrap_class+'" />');v.parent().append(s);v.parent().addClass("complete")}function p(w,t,r){var v=h("filterize-feColorMatrix");var u=h("filterize-root");var s=["<svg xmlns='http://www.w3.org/2000/svg'                 id='"+u+"'                 class='"+q.replacement_class_base+" "+q.replacement_class+"'                 viewBox='0 0 "+t+" "+r+"'                 width='"+t+"'                 height='"+r+"'           >","<defs>","<filter id='"+v+"'>",q.svg_filter,"</filter>","</defs>","<image filter='url(&quot;#"+v+"&quot;)'                     x='0' y='0''                     width='"+t+"'                     height='"+r+"'                     xmlns:xlink='http://www.w3.org/1999/xlink'                     xlink:href='"+w+"' />","</svg>"].join("\n");return s}function m(x,w,r){var t=document.createElement("canvas");t.width=w;t.height=r;var v=t.getContext("2d");var s=new Image();s.src=x;v.drawImage(s,0,0,w,r);var u=v.getImageData(0,0,w,r);q.canvas_function(u.data,w,r);v.putImageData(u,0,0,0,0,w,r);return t}var o=this;o.each(function(r,t){var s=g(t);new imagesLoaded(s,g.proxy(n,null,s))});if(typeof(q.callback)=="function"){q.callback(i)}return this}})}(jQuery));